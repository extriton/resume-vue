(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["snake"],{"275c":function(e,s,t){"use strict";var a=t("658b"),i=t.n(a);i.a},"61ea":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"game-snake-wrapper"},[t("GameSnake")],1)},i=[],n=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"snake-wrapper"},[t("div",{staticClass:"game-area",style:e.gameAreaStyle},[e.isStarted?t("div",[e._l(e.game.starsHtml,(function(e,s){return t("div",{key:"st"+s,staticClass:"star",class:e._class,style:e._style},[t("i",{staticClass:"fa fa-apple"})])})),e._l(e.game.snake,(function(s,a){return t("div",{key:"sn"+a,staticClass:"snake",style:e.ballStyle(s)},[t("span",{directives:[{name:"show",rawName:"v-show",value:s.head,expression:"ball.head"}]},[t("i",{staticClass:"fa fa-meh-o"})]),t("span",{directives:[{name:"show",rawName:"v-show",value:!s.head,expression:"!ball.head"}],staticClass:"ball-body"})])}))],2):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isGameOver,expression:"isGameOver"}],staticClass:"gameover"},[e._v("Game Over")])]),t("div",{staticClass:"game-control"},[t("div",{staticClass:"score"},[t("h1",{staticClass:"green"},[e._m(0),t("div",{staticClass:"value"},[e._v(e._s(e.score.green))])]),t("h1",{staticClass:"yellow"},[e._m(1),t("div",{staticClass:"value"},[e._v(e._s(e.score.yellow))])]),t("h1",{staticClass:"red"},[e._m(2),t("div",{staticClass:"value"},[e._v(e._s(e.score.red))])]),t("br"),t("h1",{staticClass:"total"},[t("span",[e._v("Total:")]),t("span",{staticClass:"value"},[e._v(e._s(e.score.total))])]),t("h1",{staticClass:"total"},[t("span",[e._v("Level:")]),t("span",{staticClass:"value"},[e._v(e._s(e.score.level))])])]),t("div",{staticClass:"buttons"},[t("div",{staticClass:"button",on:{click:function(s){return e.onStart()}}},[t("span",{directives:[{name:"show",rawName:"v-show",value:!e.isStarted,expression:"!isStarted"}]},[e._v("Start")]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.isStarted,expression:"isStarted"}]},[e._v("Restart")]),e._v("\r\n                 (R)\r\n            ")]),t("div",{staticClass:"button",class:{disabled:!e.isStarted||e.isGameOver},on:{click:function(s){return e.onPause()}}},[t("span",{directives:[{name:"show",rawName:"v-show",value:!e.isPaused||!e.isStarted,expression:"!isPaused || !isStarted "}]},[e._v("Pause")]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.isPaused,expression:"isPaused"}]},[e._v("Continue")]),e._v("\r\n                 (P)\r\n            ")]),t("div",{staticClass:"button",on:{click:function(s){return e.onSettings()}}},[e._v("Settings (S)")])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowModal,expression:"isShowModal"}],staticClass:"modal-wrapper",on:{click:function(s){return e.hideModal()}}},[t("div",{staticClass:"modal-box",on:{click:function(e){e.stopPropagation()}}},[t("div",{staticClass:"game-settings"},[t("div",{staticClass:"settings-wrapper"},[t("div",{staticClass:"game-size"},[t("h2",[e._v("Game size")]),e._l(e.gameTypes,(function(s,a){return t("div",{key:"gt"+a},[t("h3",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.gameIndex,expression:"settings.gameIndex"}],attrs:{type:"radio",id:s.type},domProps:{value:a,checked:e._q(e.settings.gameIndex,a)},on:{change:function(s){return e.$set(e.settings,"gameIndex",a)}}}),t("label",{attrs:{for:s.type}},[e._v(e._s(s.desc))])])])}))],2),t("div",{staticClass:"apple-count"},[t("h2",[e._v("Apple count")]),e._l(e.starsCount,(function(s,a){return t("div",{key:"sc"+a},[t("h3",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.starsIndex,expression:"settings.starsIndex"}],attrs:{type:"radio",id:"sc"+a},domProps:{value:a,checked:e._q(e.settings.starsIndex,a)},on:{change:function(s){return e.$set(e.settings,"starsIndex",a)}}}),t("label",{attrs:{for:"sc"+a}},[e._v(e._s(s))])])])}))],2)]),t("div",{staticClass:"clearfix"}),t("div",{staticClass:"button",on:{click:function(s){return e.onOkSettings()}}},[e._v("Ok")]),t("div",{staticClass:"button",on:{click:function(s){return e.onCancelSettings()}}},[e._v("Cancel")])])])])])},r=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"icon"},[t("i",{staticClass:"fa fa-apple"})])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"icon"},[t("i",{staticClass:"fa fa-apple"})])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"icon"},[t("i",{staticClass:"fa fa-apple"})])}],h={LEFT:37,UP:38,RIGHT:39,DOWN:40,START:82,PAUSE:80,SETTINGS:83},o={name:"GameSnake",data:function(){return{gameTypes:[{type:"small",w_size:20,h_size:20,desc:"Small (20x20)"},{type:"medium",w_size:25,h_size:25,desc:"Medium (25x25)"},{type:"large",w_size:30,h_size:30,desc:"Large (30x30)"}],starsCount:[10,15,20],gameIndex:0,starsIndex:0,settings:{gameIndex:0,starsIndex:0},score:{green:0,yellow:0,red:0,total:0,level:1},isStarted:!1,isPaused:!1,isGameOver:!1,game:{nextStep:1,direction:"down",nextDirection:"down",speed:100,count:0,stars:new Array,starsHtml:new Array,snake:new Array,intervalId:null,starsGreen:0,starsYellow:0,starsRed:0},isShowModal:!1}},computed:{gameAreaStyle:function(){return{width:16*this.gameTypes[this.gameIndex].w_size+"px",height:16*this.gameTypes[this.gameIndex].h_size+"px"}},H_SIZE:function(){return this.gameTypes[this.gameIndex].h_size},W_SIZE:function(){return this.gameTypes[this.gameIndex].w_size},STARS_CNT:function(){return this.starsCount[this.starsIndex]}},methods:{ballStyle:function(e){var s={top:16*e.y,left:16*e.x,"transition-duration":this.game.speed/1e3+"s","-webkit-transition-duration":this.game.speed/1e3+"s"};return e.x==e.next_x&&(e.next_y>e.y?s.top+=4*this.game.nextStep:s.top-=4*this.game.nextStep),e.y==e.next_y&&(e.next_x>e.x?s.left+=4*this.game.nextStep:s.left-=4*this.game.nextStep),s.top+="px",s.left+="px",s},onStart:function(){this.reset(),this.start()},onPause:function(){this.isStarted&&!this.isGameOver&&(this.isPaused=!this.isPaused)},onSettings:function(){this.isPaused=!0,this.settings.gameIndex=this.gameIndex,this.settings.starsIndex=this.starsIndex,this.showModal()},reset:function(){this.isStarted=!1,this.isPaused=!1,this.isGameOver=!1,this.score.green=0,this.score.yellow=0,this.score.red=0,this.score.total=0,this.score.level=1,this.game.nextStep=1,this.game.direction="down",this.game.nextDirection="down",this.game.speed=100,this.game.count=0,this.game.stars=new Array,this.game.starsHtml=new Array,this.game.snake=new Array,null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)},start:function(){this.game.stars=new Array(this.H_SIZE);for(var e=0;e<this.H_SIZE;e++){this.game.stars[e]=new Array(this.W_SIZE);for(var s=0;s<this.W_SIZE;s++)this.game.stars[e][s]=0}this.game.starsRed=Math.floor(.1*this.STARS_CNT+.5),this.game.starsYellow=2*this.game.starsRed,this.game.starsGreen=this.STARS_CNT-(this.game.starsYellow+this.game.starsRed),this.game.snake=new Array,this.game.snake.push({x:1,y:3,next_x:1,next_y:4,head:!0}),this.game.snake.push({x:1,y:2,next_x:1,next_y:3,head:!1}),this.game.snake.push({x:1,y:1,next_x:1,next_y:2,head:!1});for(var t=0;t<this.game.starsGreen;t++)this.addStar(1);for(var a=0;a<this.game.starsYellow;a++)this.addStar(2);for(var i=0;i<this.game.starsRed;i++)this.addStar(3);this.runInterval(),this.isStarted=!0},addStar:function(e){var s=!0;while(s){var t=this.random(0,this.H_SIZE-1),a=this.random(0,this.W_SIZE-1);if(0==this.game.stars[t][a]&&(this.game.snake[0].next_y!=t||this.game.snake[0].next_x!=a)){s=!1;for(var i=0;i<this.game.snake.length;i++)if(this.game.snake[i].y==t&&this.game.snake[i].x==a){s=!0;break}if(!s){var n={top:16*t+"px",left:16*a+"px"},r="";1==e&&(r={green:!0}),2==e&&(r={yellow:!0}),3==e&&(r={red:!0}),this.game.stars[t][a]=e,this.game.starsHtml.push({y:t,x:a,colorId:e,_class:r,_style:n});break}}}},moveSnake:function(){if(1!=this.game.nextStep||this.checkCrash()||(this.isGameOver=!0,this.playSound(999)),4==this.game.nextStep&&this.checkStar(),this.game.nextStep<4)this.game.nextStep+=1;else{for(var e=0;e<this.game.snake.length;e++)this.game.snake[e].x=this.game.snake[e].next_x,this.game.snake[e].y=this.game.snake[e].next_y;switch(this.game.direction=this.game.nextDirection,this.game.direction){case"left":this.game.snake[0].next_x=this.game.snake[0].x-1;break;case"right":this.game.snake[0].next_x=this.game.snake[0].x+1;break;case"up":this.game.snake[0].next_y=this.game.snake[0].y-1;break;case"down":this.game.snake[0].next_y=this.game.snake[0].y+1;break}for(var s=1;s<this.game.snake.length;s++)this.game.snake[s].next_x=this.game.snake[s-1].x,this.game.snake[s].next_y=this.game.snake[s-1].y;this.game.nextStep=1}},runInterval:function(){var e=this;this.intervalId=setInterval((function(){e.isPaused||!e.isStarted||e.isGameOver||e.moveSnake()}),this.game.speed)},checkCrash:function(){switch(this.game.direction){case"up":if(this.game.snake[0].next_y<0)return!1;break;case"down":if(this.game.snake[0].next_y>this.H_SIZE-1)return!1;break;case"left":if(this.game.snake[0].next_x<0)return!1;break;case"right":if(this.game.snake[0].next_x>this.W_SIZE-1)return!1;break}for(var e=1;e<this.game.snake.length;e++)if(this.game.snake[0].next_x==this.game.snake[e].x&&this.game.snake[0].next_y==this.game.snake[e].y)return!1;return!0},checkStar:function(){var e=this.game.snake[0].next_y,s=this.game.snake[0].next_x,t=this.game.stars[e][s];if(0!=t){this.game.stars[e][s]=0;for(var a=0;a<this.game.starsHtml.length;a++)if(this.game.starsHtml[a].y==e&&this.game.starsHtml[a].x==s){this.game.starsHtml.splice(a,1);break}var i;switch(this.incScore(t),this.playSound(t),t){case 1:this.addBall();break;case 2:this.addBall(),this.addBall();break;case 3:i=Math.floor(this.game.snake.length/2+.5),i<3&&(i=3),this.game.snake.splice(i,this.game.snake.length-i);break}this.addStar(t),this.score.total%10==0&&(this.score.level++,this.game.speed>30&&(this.game.speed-=5),null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.runInterval())}},incScore:function(e){switch(e){case 1:this.score.green+=1;break;case 2:this.score.yellow+=1;break;case 3:this.score.red+=1;break}this.score.total+=1},addBall:function(){var e,s,t=this.game.snake[this.game.snake.length-1];t.x==t.next_x&&(s=2*t.y-t.next_y,this.game.snake.push({x:t.x,y:s,next_x:t.x,next_y:t.y,head:!1})),t.y==t.next_y&&(e=2*t.x-t.next_x,this.game.snake.push({x:e,y:t.y,next_x:t.x,next_y:t.y,head:!1}))},random:function(e,s){var t=e-.5+Math.random()*(s-e+1);return Math.round(t)},playSound:function(e){var s=new Audio;switch(e){case 1:s.src="/snake/snd/snd_eat.wav";break;case 2:s.src="/snake/snd/snd_eat.wav";break;case 3:s.src="/snake/snd/snd_eat.wav";break;case 999:s.src="/snake/snd/snd_gameover.wav";break}s.volume=.4,s.autoplay=!0},keyHandler:function(e){if((e.keyCode===h.START||e.keyCode===h.PAUSE||e.keyCode===h.SETTINGS||e.keyCode===h.LEFT||e.keyCode===h.UP||e.keyCode===h.RIGHT||e.keyCode===h.DOWN)&&(e.keyCode===h.START&&this.onStart(),e.keyCode===h.PAUSE&&this.onPause(),e.keyCode===h.SETTINGS&&this.onSettings(),this.isStarted&&!this.isPpaused)){switch(e.keyCode){case h.LEFT:"left"!=this.game.direction&&"right"!=this.game.direction&&(this.game.nextDirection="left");break;case h.UP:"up"!=this.game.direction&&"down"!=this.game.direction&&(this.game.nextDirection="up");break;case h.RIGHT:"left"!=this.game.direction&&"right"!=this.game.direction&&(this.game.nextDirection="right");break;case h.DOWN:"up"!=this.game.direction&&"down"!=this.game.direction&&(this.game.nextDirection="down");break}e.preventDefault()}},showModal:function(){this.isShowModal=!0},hideModal:function(){this.isShowModal=!1},onOkSettings:function(){this.settings.gameIndex==this.gameIndex&&this.settings.starsIndex==this.starsIndex||(this.gameIndex=this.settings.gameIndex,this.starsIndex=this.settings.starsIndex,this.reset()),this.hideModal()},onCancelSettings:function(){this.hideModal()}},created:function(){window.addEventListener("keydown",this.keyHandler)},beforeDestroy:function(){window.removeEventListener("keydown",this.keyHandler),null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}},l=o,d=(t("f3ff"),t("2877")),c=Object(d["a"])(l,n,r,!1,null,"7e5946e5",null),m=c.exports,g={name:"Snake",components:{GameSnake:m}},u=g,v=(t("275c"),Object(d["a"])(u,a,i,!1,null,null,null));s["default"]=v.exports},"658b":function(e,s,t){},6855:function(e,s,t){},f3ff:function(e,s,t){"use strict";var a=t("6855"),i=t.n(a);i.a}}]);
//# sourceMappingURL=snake.37cc0d49.js.map